{% comment %}
  Renders product variant-picker

  Accepts:
  - product: {Object} product object.
  - block: {Object} passing the block information.
  - product_form_id: {String} Id of the product form to which the variant picker is associated.
  Usage:
  {% render 'product-variant-picker', product: product, block: block, product_form_id: product_form_id %}
{% endcomment %}
<style>
.size-guide-link{
  color:#1a73e8;
  text-decoration:underline;
  cursor:pointer;
  font-size:14px;
}

.size-guide-modal{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.55);
  z-index:9999;
}

.size-guide-content{
  background:#fff;
  max-width:520px;
  margin:6% auto;
  padding:22px;
  border-radius:16px;
  position:relative;
  box-shadow:0 20px 40px rgba(0,0,0,.15);
}

.size-guide-close{
  position:absolute;
  right:15px;
  top:10px;
  font-size:26px;
  cursor:pointer;
}

.sg-title{
  text-align:center;
  margin-bottom:15px;
}

.unit-toggle{
  text-align:center;
  margin-bottom:12px;
}

.unit-btn{
  padding:8px 16px;
  border:1px solid #000;
  border-radius:20px;
  margin:0 4px;
  background:#fff;
  cursor:pointer;
}

.unit-btn.active{
  background:#000;
  color:#fff;
}

.size-guide-table{
  width:100%;
  border-collapse:collapse;
  margin-bottom:15px;
  font-size:14px;
}

.size-guide-table th,
.size-guide-table td{
  border:1px solid #e5e5e5;
  padding:9px;
  text-align:center;
}

.size-guide-table th{
  background:#fafafa;
}

/* Accordion */

.sg-acc-btn{
  width:100%;
  text-align:left;
  padding:12px 14px;
  border:none;
  background:#f4f4f4;
  border-radius:10px;
  margin-top:8px;
  font-weight:600;
  cursor:pointer;
}

.sg-acc-btn.active{
  background:#e8e8e8;
}

.sg-acc-panel{
  padding:10px 12px;
  display:none;
  font-size:14px;
}

.sg-acc-panel ul{
  margin:0;
}

@media(max-width:600px){
  .size-guide-content{
    width:92%;
    margin-top:18%;
  }
}

</style>


{%- unless product.has_only_default_variant -%}
 
  {% comment %} <a class="size-guide-link" href="javascript:void(0);" style="color: black;" >View Size Guide</a> {% endcomment %}

<div id="sizeGuideModal" class="size-guide-modal">
  <div class="size-guide-content">

    <span class="size-guide-close">&times;</span>

    <h2 class="sg-title">Body Measurements</h2>

    <div class="unit-toggle">
      <button class="unit-btn active" data-unit="cm">CM</button>
      <button class="unit-btn" data-unit="inch">IN</button>
    </div>

    <!-- CM TABLE -->
    <table class="size-guide-table cm-table">
      <tr>
        <th>Size</th><th>Bust (cm)</th><th>Waist (cm)</th><th>Hip (cm)</th>
      </tr>
      <tr><td>XXS</td><td>30</td><td>24</td><td>34</td></tr>
      <tr><td>XS</td><td>32</td><td>26</td><td>36</td></tr>
      <tr><td>S</td><td>34</td><td>28</td><td>38</td></tr>
      <tr><td>M</td><td>36</td><td>30</td><td>40</td></tr>
      <tr><td>L</td><td>38</td><td>32</td><td>42</td></tr>
      <tr><td>XL</td><td>41</td><td>34</td><td>45</td></tr>
      <tr><td>XXL</td><td>44</td><td>38</td><td>48</td></tr>
    </table>

    <!-- IN TABLE -->
    <table class="size-guide-table inch-table" style="display:none;">
      <tr>
        <th>Size</th><th>Bust (in)</th><th>Waist (in)</th><th>Hip (in)</th>
      </tr>
      <tr><td>XXS</td><td>30</td><td>24</td><td>34</td></tr>
      <tr><td>XS</td><td>32</td><td>26</td><td>36</td></tr>
      <tr><td>S</td><td>34</td><td>28</td><td>38</td></tr>
      <tr><td>M</td><td>36</td><td>30</td><td>40</td></tr>
      <tr><td>L</td><td>38</td><td>32</td><td>42</td></tr>
      <tr><td>XL</td><td>41</td><td>34</td><td>45</td></tr>
      <tr><td>XXL</td><td>44</td><td>38</td><td>48</td></tr>
    </table>

    <!-- COLLAPSIBLE SECTIONS -->

    <div class="sg-accordion">
      <button class="sg-acc-btn">How to Measure?</button>
      <div class="sg-acc-panel">
        <ul>
          <li><strong>Bust:</strong> Measure around the fullest part of chest</li>
          <li><strong>Waist:</strong> Measure around natural waistline</li>
          <li><strong>Hip:</strong> Measure around fullest hip area</li>
        </ul>
      </div>
    </div>

    <div class="sg-accordion">
      <button class="sg-acc-btn">International Size Conversion</button>
      <div class="sg-acc-panel">
        <table class="size-guide-table">
          <tr><th>Size</th><th>US</th><th>UK</th><th>EU</th><th>AU</th></tr>
          <tr><td>XS</td><td>2</td><td>6</td><td>34</td><td>6</td></tr>
          <tr><td>S</td><td>4</td><td>8</td><td>36</td><td>8</td></tr>
          <tr><td>M</td><td>6</td><td>10</td><td>38</td><td>10</td></tr>
          <tr><td>L</td><td>8</td><td>12</td><td>40</td><td>12</td></tr>
          <tr><td>XL</td><td>10</td><td>14</td><td>42</td><td>14</td></tr>
        </table>
      </div>
    </div>

  </div>
</div>



  <variant-selects
    id="variant-selects-{{ section.id }}"
    data-section="{{ section.id }}"
    {{ block.shopify_attributes }}
  >
     
    {%- for option in product.options_with_values -%}
      {%- liquid
        assign swatch_count = option.values | map: 'swatch' | compact | size
        assign picker_type = block.settings.picker_type

        if swatch_count > 0 and block.settings.swatch_shape != 'none'
          if block.settings.picker_type == 'dropdown'
            assign picker_type = 'swatch_dropdown'
          else
            assign picker_type = 'swatch'
          endif
        endif
      -%}
      {%- if picker_type == 'swatch' -%}
        <fieldset class="js product-form__input product-form__input--swatch">
          <legend class="form__label">
            {{ option.name }}:
            <span data-selected-value>
              {{- option.selected_value -}}
            </span>
          </legend>
          {% render 'product-variant-options',
            product: product,
            option: option,
            block: block,
            picker_type: picker_type
          %}
        </fieldset>
      {%- elsif picker_type == 'button' -%}
      
        <fieldset class="js product-form__input product-form__input--pill">
          <div style="display: flex;
      justify-content: space-between;" >
            <legend class="form__label">{{ option.name }}</legend>
            <a class="size-guide-link" href="javascript:void(0);" style="color: black;" >View Size Guide</a>
              </div>
          {% render 'product-variant-options',
            product: product,
            option: option,
            block: block,
            picker_type: picker_type
          %}
          
          
        </fieldset>
        
      {%- else -%}
        <div class="product-form__input product-form__input--dropdown">
          <label class="form__label" for="Option-{{ section.id }}-{{ forloop.index0 }}">
            {{ option.name }}
          </label>
          <div class="select">
            {%- if picker_type == 'swatch_dropdown' -%}
              <span
                data-selected-value
                class="dropdown-swatch"
              >
                {% render 'swatch', swatch: option.selected_value.swatch, shape: block.settings.swatch_shape %}
              </span>
            {%- endif -%}
            <select
              id="Option-{{ section.id }}-{{ forloop.index0 }}"
              class="select__select"
              name="options[{{ option.name | escape }}]"
              form="{{ product_form_id }}"
            >
              {% render 'product-variant-options',
                product: product,
                option: option,
                block: block,
                picker_type: picker_type
              %}
            </select>
            <span class="svg-wrapper">
              {{- 'icon-caret.svg' | inline_asset_content -}}
            </span>
          </div>
        </div>
      {%- endif -%}
    {%- endfor -%}

    <script type="application/json" data-selected-variant>
      {{ product.selected_or_first_available_variant | json }}
    </script>
<script>
document.addEventListener("DOMContentLoaded", function(){

  const modal = document.getElementById("sizeGuideModal");
  const btn = document.querySelector(".size-guide-link");
  const closeBtn = document.querySelector(".size-guide-close");

  btn.onclick = () => modal.style.display = "block";
  closeBtn.onclick = () => modal.style.display = "none";
  window.onclick = e => { if(e.target === modal){ modal.style.display = "none"; }};

  document.querySelectorAll(".unit-btn").forEach(button=>{
    button.addEventListener("click", ()=>{
      document.querySelectorAll(".unit-btn").forEach(b=>b.classList.remove("active"));
      button.classList.add("active");

      document.querySelector(".cm-table").style.display =
        button.dataset.unit === "cm" ? "table" : "none";

      document.querySelector(".inch-table").style.display =
        button.dataset.unit === "inch" ? "table" : "none";
    });
  });

  document.querySelectorAll(".sg-acc-btn").forEach(btn=>{
    btn.addEventListener("click", ()=>{
      btn.classList.toggle("active");
      let panel = btn.nextElementSibling;
      panel.style.display = panel.style.display === "block" ? "none" : "block";
    });
  });

});
</script>



  </variant-selects>
{%- endunless -%}
